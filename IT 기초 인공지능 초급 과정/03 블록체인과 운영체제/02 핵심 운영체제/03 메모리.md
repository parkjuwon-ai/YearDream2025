01 메모리 관리의 개념
프로그램들이 잘 실행될 수 있도록 메모리를 할당하고, 해제하는 작업

각 프로그램의 리소스를 보호해야 한다
여러 프로세스가 동시에 실행될 수 있도록 메모리 공간을 제공해야 한다

## **1. 메모리 관리란?**
- **컴퓨터의 메모리(RAM)는 공간이 제한적**임
- 여러 프로그램이 동시에 실행되려면 메모리 공간을 적절하게 **분배하고 정리**해야 함

## **2. 메모리 관리가 중요한 이유**
메모리를 제대로 관리하지 않으면?
- 한 프로그램이 다른 프로그램의 데이터를 잘못 건드려서 프로그램이 멈추거나 오류 발생 
- 메모리 공간이 부족해서 새로운 프로그램이 실행되지 못함

## **3. 메모리 관리의 핵심 역할**
1️⃣ **메모리 공간 할당 (Allocation)**
- 프로그램이 실행될 때 필요한 메모리 공간을 줌
2️⃣ **메모리 공간 해제 (Deallocation)**
- 프로그램이 끝나면 메모리 공간을 비워줌
3️⃣ **메모리 보호 (Memory Protection)**
- 프로그램끼리 서로의 메모리 공간을 침범하지 못하도록 보호
4️⃣ **효율적인 메모리 관리**
- 메모리 공간을 효율적으로 나눠서 최대한 많은 프로그램이 동시에 실행되도록 관리


-메모리 주소
메모리는 아주 많은 작은 공간으로 구성됨
각 공간에는 고유 번호가 있어서 데이터를 저장하거나 찾을 때 사용
이 고유 번호가 메모리 주소


##  **메모리 할당 (Memory Allocation)**
 **프로그램이 실행될 때 메모리의 일정 공간을 제공해 주는 것**
- 할당된 공간은 **다른 프로그램이 사용 못함!**
- 한 번 할당된 공간은 사용이 끝날 때까지 **보호됨**


## **메모리 해제 (Memory Release)**
 **프로그램이 작업을 끝내고, 사용하던 메모리 공간을 비워주는 것**
- 비워진 공간은 다시 다른 프로그램이 사용할 수 있음
- 메모리를 제대로 해제하지 않으면 공간이 부족해지는 문제가 발생함 (메모리 누수 문제)

-연속할당과 불연속 할당
연속할당 메모리 공간을 연속적으로 제공 빠르고 관리 쉬움, 공간이 충분해야 함

불연속 할당 메모리 공간을 띄엄띄엄 제공
공간을 효율적으로 활용할 수 있지만, 관리 복잡
->현대적 메모리 관리 방식:가상메모리 

-고정 분할 방식
미리 방 크기를 정해 놓는 방식
딱 맞는 크기의 방을 요청하면 문제가 없지만, 현실에서는 그렇지 않은 경우가 많아요.

-외부 단편화
남은 공간은 충분하지만, 규칙 때문에 사용할 수 없는 경우

-내부 단편화
할당은 해주었지만 사용하지 않고 남는 공간이 발생



-가변 분할 방식
손님마다 다른 방 길이를 받도록 하는 방식
- 가변 분할 방식은 손님이 요청한 만큼 정확히 공간을 나눠주는 방식이에요.
- 메모리를 미리 정해진 크기로 나누지 않고, **손님이 요청하는 대로 자유롭게 크기를 바꿔서 방을 제공하는 방식**이에요.
-특징과 장점
- **필요한 만큼만 제공하니까 공간 낭비가 적음**
- 내부 단편화는 거의 없음

- 단점
- 프로세스(손님)가 자꾸 들어오고 나가다 보면, 빈 공간이 군데군데 흩어져서 **외부 단편화가 발생할 수 있어요.**

->> 운영체제는 공간이 효율적으로 사용되도록 **다양한 메모리 관리 기법(압축, 통합 등)**을 통해 외부 단편화를 줄이려고 노력해요.



02 가상 메모리
실제 물리적(RAM)크기보다 큰 공간을 프로그램이 사용할 수 있도록 컴퓨터가 만들어내는 가사의 메모리 공간

컴퓨터에 메모리 공간이 부족하거나, 프로세스 간에 메모리 사용이 충돌할 경우 문제가 생길 수 있음


실제 물리적 주소가 아닌 가상의 주소인 논리적 주소를 프로세스가 사용 
-모든 프로세스가 고정된 주소를 가질 수 있도록 한다.
-실제 물리적인 주소는 운영체제만 접근할 수 있어 리소스를 보호
-보조 기억 장치 일부를 메모리처럼 사용할 수 있도록 함


## **가상 메모리의 원리**
가상 메모리는 실제 메모리(RAM)와 보조기억장치(HDD, SSD)의 일부분을 활용해서 메모리를 관리해. 이를 위해:
1. **논리적 주소 (Logical address)**
    - 프로세스가 생각하는 가상의 주소
2. **물리적 주소 (Physical address)**
    - 실제 컴퓨터의 RAM에서 사용하는 주소

이 두 주소 사이의 연결(매핑)을 운영체제가 관리하면서 프로세스가 실제 메모리 구조를 알지 못해도 실행할 수 있게 해줘.

- 프로세스 👉 논리적 주소 사용
- 운영체제 👉 논리적 주소를 실제 물리적 주소로 변환 
👉 페이지 테이블(Page Table)을 통해 관리

**이렇게 하면 프로세스는 언제나 독립적인 주소공간을 가진다고 착각하고, 안전하게 동작할 수 있어**

가상 메모리의 장점
### **1. 프로세스마다 독립된 주소 공간 제공**
- 모든 프로세스가 동일한 논리적 주소 범위(0~최대값)를 사용할 수 있어서 프로그래밍이 쉬워짐.
    - 프로그래머가 메모리 위치를 일일이 신경 쓰지 않아도 됨. 예를 들어, 변수에 "x = 100"이라고 쓰면, 운영체제가 알아서 적절한 곳에 저장.

 **2. 자원 보호 및 안정성**
- 실제 물리 메모리에 접근은 운영체제만 가능 → 프로세스가 다른 프로세스 영역을 침범할 수 없어 안전성 향상.

 **3. 큰 프로그램도 실행 가능**
- 실제 메모리(RAM) 크기보다 더 큰 프로그램을 실행할 수 있어.

 **4. 메모리 관리 효율 증가**
- 자주 사용하지 않는 데이터를 보조기억장치로 보내서 실제 RAM의 효율을 높일 수 있어.

## **프로세스의 메모리 구조**
프로세스가 메모리를 쓸 때 기본적으로 4가지 영역을 사용:
- **코드(Code)**: 프로그램 명령어 저장
- **데이터(Data)**: 전역 변수와 정적 변수 저장
- **힙(Heap)**: 동적 메모리 할당 (필요할 때마다 메모리 확보)
- **스택(Stack)**: 지역 변수, 함수 호출 정보 저장 (임시적 저장공간)
이 구조는 프로세스가 사용하는 논리적 주소에서 명확히 나눠지고, 실제 메모리에서는 운영체제가 적절히 배치


## **페이지 테이블(Page Table)**
- 가상 메모리를 관리할 때 사용하는 중요한 표로, 논리적 주소를 실제 물리적 주소로 연결하는 역할을 함.
- 페이지(Page): 메모리를 일정한 크기로 나눈 작은 단위.
👉 **프로세스가 메모리를 요청하면**
논리적 주소 → 페이지 테이블 참조 → 물리적 주소 확인 → 실제 메모리 접근
이 방식을 통해 안전하게, 효율적으로 메모리를 관리 가능! 📚✨

---

## 🧹 **페이지 교체(Page Replacement)**
- 메모리가 부족하면 이미 사용 중인 메모리 일부를 보조기억장치로 내보내고 필요한 데이터를 가져옴.
- 이때 어떤 페이지를 내보낼지 결정하는 알고리즘:
    - FIFO(먼저 들어온 페이지 먼저 내보냄)
    - LRU(가장 오래 사용하지 않은 페이지 내보냄)
    - 최적 알고리즘(앞으로 가장 오랫동안 사용하지 않을 페이지를 내보냄) 등 사용 가능.

---


03 페이징
페이지 물리적 메모리와 가상 주소를 연결하는 단위
-가상 주소와 물리적 주소를 매핑하는 단위
일반적으로 4KB 또는 8KB의 크기
메모리는 이 페이지 단위로 나누고 사용

- **페이지 테이블**은 가상 메모리의 페이지와 물리적 메모리의 페이지를 연결(매핑)해주는 표
- 프로세스 A가 접근하려는 주소(논리 주소)는 실제 물리 주소와 다를 수 있어
- 페이지 테이블을 통해 실제 물리 주소를 찾아줘 (페이지 번호 ↔ 물리 메모리 번호 매핑)

스와핑
- 메모리에 공간이 부족할 때, 사용 빈도가 적은 프로세스를 잠시 하드디스크로 옮겨놓는 방법
- 새로운 프로세스(D)를 실행할 공간이 부족하면, 기존에 실행 중인 프로세스(A, B, C) 중 하나를 하드디스크로 이동해서 공간을 확보해



요구페이징
프로세스 전체가 아닌 "**페이지 단위**"로 필요한 부분만 하드디스크와 메모리 간에 옮기는 방식이에요.

### 장점 🔵

- 당장 필요한 부분만 메모리에 올리기 때문에 메모리 낭비를 줄일 수 있음.
- 프로세스 전체가 아니라 일부만 옮겨오기 때문에 효율적임.

### 프로세스의 작동 원리 (이미지 기반 추가 설명)

- 프로세스의 여러 페이지 중 실제 메모리에 없는 페이지는 페이지 테이블에서 'X' 표시됨.
- 페이지 테이블에 X가 있으면 → 하드디스크에서 해당 페이지를 가져와 메모리에 적재 🔄 (필요할 때만 옮김)

캐시
캐시는 자주 사용하는 데이터를 빠르게 사용하기 위해 별도의 장소에 임시로 저장해두는 공간이에요.

### 캐시의 이점 🔵
- 반복해서 자주 쓰는 데이터를 빠르게 사용 가능
- 데이터 접근 속도를 향상시켜 컴퓨터의 성능 향상
